@startuml BookingAggregation
title 予約集約 (Booking Aggregation)

package "予約集約(BookingAggregation)" {
  !include ./Booking.pu
}

note right of Booking
  【予約枠ルール（可否判定）】

  ■ 営業時間
  - 予約の開始・終了が 10:00〜18:00 の範囲に収まること
    （start >= 10:00 かつ end <= 18:00）

  ■ 前提
  - Booking は「確定した timeRange」を保持する
  - 空き状況の判定は「同日の既存予約（Confirmed/Draft含む想定）」を参照する

  ■ その日に予約が 0 件（完全に空いている日）
  - 全面（フロント+リアすべて）の予約:
      10:00 / 11:00 / 12:00 開始のみ可
  - 全面以外の予約:
      10:00 開始 または 14:00 開始のみ可

  ■ その日に予約が 1 件以上ある日（すでに枠が埋まっている日）
  - 全面予約: 予約不可
  - 全面以外: 営業時間内なら OK（= 時間帯の制約は営業時間のみ）
end note

@enduml
